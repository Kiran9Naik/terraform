import boto3

def lambda_handler(event, context):
    instance_id = event['detail']['instance-id']
    ec2 = boto3.client('ec2')
    
    print(f"Received stop notification for instance {instance_id}. Attempting to start it...")
    
    response = ec2.start_instances(InstanceIds=[instance_id])
    print(f"Start response: {response}")
    
    return {
        'statusCode': 200,
        'body': f"Instance {instance_id} restarted."
    }
